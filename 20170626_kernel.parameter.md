# 2017-06-26 edit by liu2lin600

## Linux内核参数说明及优化


### 网络相关 `/proc/sys/net`

- net.core.somaxconn = 32768
	系统同时发起并发TCP连接数

- net.core.tcp_max_tw_buckets = 5000
	表示系统同时保持TIME_WAIT套接字的最大数量

- net.ipv4.tcp_syncookies = 1
	当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认0

- net.ipv4.tcp_max_syn_backlog = 65536
 	记录的那些尚未收到客户端确认信息的连接请求的最大值，调大能一定程度上增加抵抗syn攻击的能力

- net.ipv4.netdev_max_backlog = 1000
	网卡接收数据包的速度大于内核处理的速度时，会有一个队列保存这些数据包，表示该队列的最大值

- net.ipv4.tcp_syn_retries = 2
	syn重试次数

- net.ipv4.tcp_synack_retries = 2
	synack重试次数

- net.ipv4.tcp_tw_reuse = 1
	表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭

- net.ipv4.tcp_tw_recycle = 1
	开启TCP连接中TIME-WAIT Sockets的快速回收，默认为0，表示关闭

- net.ipv4.ip_local_port_range = 1024  65535
	将系统对本地端口范围限制设置为1024~65000之间

- net.ipv4.ip_conntrack_max = 10000
	系统对最大跟踪的TCP连接数的限制

- net.ipv4.tcp_fin_timeout = 30
	表示如果套接字由本端要求关闭，这个参数决定了它保持在FIN-WAIT-2状态的时间

- net.ipv4.tcp_keepalive_time = 1200
- net.ipv4.tcp_keepalive_intvl = 30
- net.ipv4.tcp_keepalive_probes = 3
	TCP发送keepalive消息的频度。缺省是2小时，如果probe 3次(每次30秒)不成功,内核才彻底放弃

- net.core.rmem_default 	# 表示内核套接字接收缓存区默认的大小
- net.core.wmem_default 	# 表示内核套接字发送缓存区默认的大小
- net.core.rmem_max 		# 表示内核套接字接收缓存区最大大小
- net.core.wmem_max 		# 表示内核套接字发送缓存区最大大小

### 硬件相关 `/proc/sys/vm`
- vm.swappiness 	# swap使用策略，默认60，0表示尽量少用


### 文件系统 `/proc/sys/fs`
- fs.file-max
	系统所能打开的最大文件数

- fs.file-nr = 22222 0 6553600
	1.已经分配的文件句柄数，2.已经分配单没有使用的文件句柄数(2.6内核为0)，3.最大文件句柄数


### 内核 














